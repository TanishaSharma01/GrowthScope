<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Market Trends - GrowthScope</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f6fa; min-height: 100vh; }

    .navbar {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: relative;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }
    .nav-brand {
      font-size: 1.5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1001;
    }
    .logo { width: 36px; height: 36px; flex-shrink: 0; }
    .logo svg { width: 100%; height: 100%; }

    .nav-menu { display: flex; gap: 30px; }
    .nav-item {
      color: white;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      transition: background-color 0.3s;
    }
    .nav-item:hover { background-color: rgba(255,255,255,0.2); }
    .nav-item.active { background-color: rgba(255,255,255,0.3); font-weight: 600; }
    .nav-upload {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      transition: background-color 0.3s;
    }
    .nav-upload:hover { background: rgba(255,255,255,0.3); }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      margin-left: auto;
      z-index: 1001;
    }
    .hamburger span {
      width: 25px;
      height: 3px;
      background: white;
      margin: 3px 0;
      transition: 0.3s;
      border-radius: 2px;
    }
    .hamburger.active span:nth-child(1) { transform: rotate(-45deg) translate(-5px, 6px); }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) { transform: rotate(45deg) translate(-5px, -6px); }

    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .nav-overlay.active { opacity: 1; visibility: visible; }

    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    .page-header {
      background: white;
      border-radius: 10px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .page-title { font-size: 2rem; color: #2c3e50; margin-bottom: 10px; }
    .page-subtitle { color: #7f8c8d; font-size: 1.1rem; }
    .location-indicator {
      background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      margin-top: 15px;
      display: inline-block;
    }

    .trends-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    .trends-card {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-left: 5px solid #ff6b6b;
    }
    .trends-title { font-size: 1.3rem; color: #2c3e50; margin-bottom: 20px; font-weight: 600; }

    .hot-products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .hot-product {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }
    .product-name { font-weight: 600; color: #856404; margin-bottom: 8px; }
    .product-trend { font-size: 0.9rem; color: #666; }
    .trend-up { color: #28a745; font-weight: 600; }

    .chart-container { position: relative; height: 300px; }
    .chart-section {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    .chart-title { font-size: 1.3rem; color: #2c3e50; margin-bottom: 20px; font-weight: 600; }

    /* Mobile */
    @media (max-width: 768px) {
      .hamburger { display: flex; }
      .nav-container {
        flex-direction: row !important;
        justify-content: space-between !important;
        align-items: center !important;
      }
      .nav-menu {
        position: fixed;
        top: 0;
        left: -100%;
        width: 80%;
        max-width: 300px;
        height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        padding: 80px 20px 20px;
        transition: left 0.3s ease;
        z-index: 1000;
        gap: 10px;
      }
      .nav-menu.active { left: 0; }
      .nav-item, .nav-upload {
        width: 100%;
        text-align: left;
        padding: 15px 20px;
        border-radius: 8px;
        font-size: 16px;
      }
      .trends-grid { grid-template-columns: 1fr; }
      .hot-products { grid-template-columns: 1fr; }
    }
    @media (max-width: 480px) {
      .nav-brand { font-size: 1.3rem; }
      .logo { width: 30px; height: 30px; }
      .page-title { font-size: 1.5rem; }
      .page-header { padding: 20px; }
      .container { padding: 15px; }
      .location-indicator { font-size: 0.9rem; padding: 8px 15px; }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-overlay" id="navOverlay"></div>
    <div class="nav-container">
      <div class="nav-brand">
        <div class="logo">
          <!-- Full GrowthScope SVG logo -->
          <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="barGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#7ED321;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#4A90E2;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="barGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#50E3C2;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#4A90E2;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="barGradient3" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#7ED321;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#417505;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="arrowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#7ED321;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#50E3C2;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#4A90E2;stop-opacity:1" />
              </linearGradient>
              <linearGradient id="curveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#7ED321;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#0F4F36;stop-opacity:1" />
              </linearGradient>
            </defs>
            <!-- Bars -->
            <rect x="15" y="70" width="8" height="20" fill="url(#barGradient1)" rx="1"/>
            <rect x="28" y="55" width="8" height="35" fill="url(#barGradient2)" rx="1"/>
            <rect x="41" y="40" width="8" height="50" fill="url(#barGradient3)" rx="1"/>
            <rect x="54" y="25" width="8" height="65" fill="url(#barGradient1)" rx="1"/>
            <!-- Curve -->
            <path d="M 15 85 Q 35 95 55 85 Q 75 75 85 45"
                  stroke="url(#curveGradient)" stroke-width="6" fill="none" stroke-linecap="round"/>
            <!-- Arrow -->
            <polygon points="85,20 90,15 95,20 85,30" fill="url(#arrowGradient)"/>
          </svg>
        </div>
        GrowthScope
      </div>

      <div class="hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </div>

      <div class="nav-menu" id="navMenu">
        <a href="/dashboard/executive" class="nav-item">Executive</a>
        <a href="/dashboard/financial" class="nav-item">Financial</a>
        <a href="/dashboard/growth" class="nav-item">Growth</a>
        <a href="/dashboard/trends" class="nav-item active">Market Trends</a>
        <a href="/dashboard/inventory" class="nav-item">Inventory</a>
        <a href="/dashboard/chat" class="nav-item">Chat</a>
        <a href="/home" class="nav-upload">Upload New Data</a>
      </div>
    </div>
  </nav>


  <div class="container">
    <div class="page-header">
      <h1 class="page-title">Regional Market Trends</h1>
      <p class="page-subtitle">Local market insights and seasonal trends in your area</p>
      <div class="location-indicator">üìç Canberra City & Surrounding Areas (10km radius)</div>
    </div>

    <!-- Hot Products Section -->
    <div class="trends-grid">
      <div class="trends-card">
        <h3 class="trends-title">üî• Trending Products This Season</h3>
        <div class="hot-products">
          <div class="hot-product"><div class="product-name">Wireless Earbuds</div><div class="product-trend"><span class="trend-up">‚Üó +34%</span> vs last month</div></div>
          <div class="hot-product"><div class="product-name">Smart Home Devices</div><div class="product-trend"><span class="trend-up">‚Üó +28%</span> vs last month</div></div>
          <div class="hot-product"><div class="product-name">Fitness Trackers</div><div class="product-trend"><span class="trend-up">‚Üó +22%</span> vs last month</div></div>
          <div class="hot-product"><div class="product-name">Coffee Machines</div><div class="product-trend"><span class="trend-up">‚Üó +19%</span> vs last month</div></div>
          <div class="hot-product"><div class="product-name">Skincare Products</div><div class="product-trend"><span class="trend-up">‚Üó +16%</span> vs last month</div></div>
          <div class="hot-product"><div class="product-name">Gaming Accessories</div><div class="product-trend"><span class="trend-up">‚Üó +15%</span> vs last month</div></div>
        </div>
      </div>

      <div class="trends-card">
        <h3 class="trends-title">üìä Category Performance (Local Stores)</h3>
        <div class="chart-container"><canvas id="categoryChart"></canvas></div>
      </div>
    </div>

    <!-- Monthly Spending Chart -->
    <div class="chart-section">
      <h3 class="chart-title">üí∞ Regional Monthly Spending Patterns</h3>
      <div class="chart-container"><canvas id="spendingChart"></canvas></div>
    </div>
  </div>

  <script>
    // Hamburger menu
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    const navOverlay = document.getElementById('navOverlay');
    function toggleMenu() {
      hamburger.classList.toggle('active');
      navMenu.classList.toggle('active');
      navOverlay.classList.toggle('active');
      document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
    }
    hamburger.addEventListener('click', toggleMenu);
    navOverlay.addEventListener('click', toggleMenu);
    navMenu.addEventListener('click', (e) => {
      if (e.target.classList.contains('nav-item') || e.target.classList.contains('nav-upload')) toggleMenu();
    });

    // Category Performance Chart
    const categoryCtx = document.getElementById('categoryChart').getContext('2d');
    new Chart(categoryCtx, {
      type: 'doughnut',
      data: {
        labels: ['Electronics','Fashion','Health & Beauty','Home & Garden','Sports & Fitness','Books & Media'],
        datasets: [{ label: 'Median Weekly Sales ($)', data: [15420,12750,8930,6840,5620,3450],
          backgroundColor:['#667eea','#28a745','#ffc107','#fd7e14','#6f42c1','#17a2b8'], borderWidth:0 }]
      },
      options: {
        responsive:true, maintainAspectRatio:false,
        plugins:{ legend:{position:'right'}, tooltip:{ callbacks:{
          label:function(ctx){ const v=ctx.parsed; const tot=ctx.dataset.data.reduce((a,b)=>a+b,0); const p=((v/tot)*100).toFixed(1); return ctx.label+': $'+v.toLocaleString()+' ('+p+'%)'; }
        }}}
      }
    });

    // Monthly Spending Chart
    const spendingCtx = document.getElementById('spendingChart').getContext('2d');
    new Chart(spendingCtx,{
      type:'line',
      data:{ labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
        datasets:[
          { label:'Average Store Revenue', data:[45000,42000,48000,52000,49000,46000,44000,47000,51000,55000,58000,62000],
            borderColor:'#667eea', backgroundColor:'rgba(102,126,234,0.1)', borderWidth:3, fill:true, tension:0.4,
            pointBackgroundColor:'#667eea', pointBorderColor:'#667eea', pointBorderWidth:2, pointRadius:6 },
          { label:'Median Customer Spending', data:[320,298,345,365,342,329,315,338,358,385,395,420],
            borderColor:'#28a745', backgroundColor:'rgba(40,167,69,0.1)', borderWidth:3, fill:false, tension:0.4,
            pointBackgroundColor:'#28a745', pointBorderColor:'#28a745', pointBorderWidth:2, pointRadius:6, yAxisID:'y1' }
        ]},
      options:{
        responsive:true, maintainAspectRatio:false,
        scales:{
          y:{ type:'linear', position:'left', beginAtZero:true, title:{display:true,text:'Store Revenue ($)'},
            ticks:{ callback:(v)=>'$'+(v/1000)+'K' }, grid:{ color:'rgba(0,0,0,0.1)'} },
          y1:{ type:'linear', position:'right', beginAtZero:true, title:{display:true,text:'Customer Spending ($)'},
            ticks:{ callback:(v)=>'$'+v }, grid:{ drawOnChartArea:false }},
          x:{ grid:{ color:'rgba(0,0,0,0.1)'} }
        },
        plugins:{ legend:{position:'top',labels:{usePointStyle:true,padding:20}} }
      }
    });
  </script>
</body>
</html>
